<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Corso Montevecchio 66</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">

    <!-- üîµ SCHERMATA 1: LOGIN / REGISTRAZIONE -->
    <div id="loginScreen" class="screen screen-login">
      <div class="login-card">
        <h1>Benvenuto üëã</h1>
        <p class="subtitle">
          Registrati per la casa <strong>Corso Montevecchio 66</strong>
        </p>

        <div class="avatar-large-wrapper">
          <div id="loginAvatarPreview" class="avatar-large">
            <span>üôÇ</span>
          </div>
        </div>

        <div class="field-row">
          <label for="loginFirstName">Nome</label>
          <input id="loginFirstName" type="text" placeholder="Es. Mario" />
        </div>
        <div class="field-row">
          <label for="loginLastName">Cognome</label>
          <input id="loginLastName" type="text" placeholder="Es. Rossi" />
        </div>

        <div class="field-row">
          <label>Foto profilo</label>
          <div class="photo-buttons">
            <button id="openCameraBtn" type="button">üì∑ Scatta foto</button>
            <label class="file-label">
              üìÅ Da galleria
              <input id="photoFileInput" type="file" accept="image/*" />
            </label>
          </div>
          <p class="note">
            Se possibile usa la fotocamera. In alternativa puoi scegliere una foto dalla galleria.
          </p>
        </div>

        <!-- Pannello fotocamera -->
        <div id="cameraPanel" class="camera-panel hidden">
          <video id="cameraVideo" autoplay playsinline></video>
          <div class="camera-buttons">
            <button id="takePhotoBtn" type="button">üì∏ Scatta</button>
            <button id="closeCameraBtn" type="button">Chiudi</button>
          </div>
        </div>

        <button id="registerBtn" class="primary-btn" type="button">
          Entra in casa
        </button>

        <p class="note tiny">
          I dati sono salvati solo su questo dispositivo (nessun server, nessun costo).
        </p>
      </div>
    </div>

    <!-- üü¢ SCHERMATA 2: CASA / GRUPPO -->
    <div id="mainScreen" class="screen screen-main">
      <header class="topbar">
        <div>
          <h1 id="groupName">Corso Montevecchio 66</h1>
          <p class="subtitle">Gestione faccende di casa</p>
        </div>
        <div class="current-user">
          <span id="currentUserAvatar" class="avatar"></span>
          <span id="currentUserName" class="user-name"></span>
        </div>
      </header>

      <main>
        <!-- üè† HOME: MENU SEZIONI + LAVAGNA -->
        <div id="homeSections" class="home-sections">
          <button class="section-tile" data-section="laundry">
            <div class="section-icon">üß∫</div>
            <div class="section-text">
              <h2>Lavatrice</h2>
              <p>Prenota lavaggio e stendini</p>
            </div>
          </button>

          <button class="section-tile" data-section="shower">
            <div class="section-icon">üöø</div>
            <div class="section-text">
              <h2>Doccia</h2>
              <p>Prenota la doccia con controllo boiler</p>
            </div>
          </button>

          <button class="section-tile" data-section="cleaning">
            <div class="section-icon">üßπ</div>
            <div class="section-text">
              <h2>Pulizie</h2>
              <p>Organizza le zone da pulire</p>
            </div>
          </button>

          <button class="section-tile" data-section="shopping">
            <div class="section-icon">üõí</div>
            <div class="section-text">
              <h2>Lista della spesa</h2>
              <p>Checklist condivisa</p>
            </div>
          </button>

          <!-- üßΩ LAVAGNA DI CASA IN HOME -->
          <section class="card blackboard-card">
            <h3 style="margin-top:0;margin-bottom:6px;font-size:0.9rem;">Lavagna di casa</h3>
            <div id="homeBlackboard" class="blackboard">
              <div id="homeBlackboardText" class="blackboard-text blackboard-placeholder">
                Tocca per scrivere un pensiero di casa
              </div>
              <div id="homeBlackboardAuthor" class="blackboard-author"></div>
            </div>
          </section>

          <!-- Dialogo per scrivere sulla lavagna -->
          <div id="blackboardDialog" class="dialog hidden">
            <p>Scrivi un pensiero da mostrare sulla lavagna:</p>
            <textarea id="blackboardInput" rows="3"
              style="width: 100%; border-radius: 8px; border: 1px solid #ccc; padding: 6px;"></textarea>
            <div class="dialog-buttons">
              <button id="blackboardCancelBtn" type="button">Annulla</button>
              <button id="blackboardSaveBtn" type="button" class="primary-btn">Scrivi</button>
            </div>
          </div>
        </div>

        <!-- üîµ SOTTO-SCHERMATA: LAVATRICE -->
        <div id="laundryScreen" class="subscreen">
          <div class="subheader">
            <button class="back-btn" data-back="home">‚Üê Indietro</button>
            <h2>Lavatrice & stendini</h2>
          </div>

          <section class="card">
            <p class="note">
              Puoi prenotare fino a <strong>2 lavatrici</strong> alla volta (2 stendini disponibili).
              Ogni stendino rimane occupato per <strong>48 ore</strong> dalla data/ora di inizio lavatrice.
            </p>

            <div class="field-row">
              <label for="laundryDateTime">Data e ora della lavatrice</label>
              <input id="laundryDateTime" type="datetime-local" />
            </div>
            <button id="laundryBookBtn" type="button" class="primary-btn">
              Prenota lavatrice
            </button>

            <p id="laundryStatusMessage" class="note"></p>
          </section>

          <section class="card">
            <h3>Prenotazioni attive</h3>
            <ul id="laundryList" class="booking-list"></ul>
            <p class="note tiny">
              Le prenotazioni scadono automaticamente dopo 48 ore dall'orario di inizio.
            </p>
          </section>
        </div>

        <!-- üîµ SOTTO-SCHERMATA: DOCCIA -->
        <div id="showerScreen" class="subscreen">
          <div class="subheader">
            <button class="back-btn" data-back="home">‚Üê Indietro</button>
            <h2>Doccia & boiler</h2>
          </div>

          <section class="card">
            <p class="note">
              Ogni doccia occupa uno slot di <strong>90 minuti</strong> (tempo doccia + ricarica boiler).
              Puoi prenotare un orario e verr√† visualizzato negli slot.
            </p>

            <div class="field-row">
              <label for="showerDateTime">Data e ora della doccia</label>
              <input id="showerDateTime" type="datetime-local" />
            </div>
            <button id="showerBookBtn" type="button" class="primary-btn">
              Prenota doccia
            </button>
          </section>

          <section class="card">
            <h3>Prossime 5 docce</h3>
            <div id="showerSlots" class="slot-list"></div>
            <p class="note tiny">
              Gli slot scaduti (dopo 90 minuti dall'inizio) vengono rimossi automaticamente.
            </p>
          </section>

          <!-- Dialogo conflitti slot -->
          <div id="showerConflictDialog" class="dialog hidden">
            <p>
              ‚ö†Ô∏è <strong>Attenzione:</strong> lo slot che hai scelto si sovrappone a una doccia gi√† prenotata.
              Puoi scegliere un altro orario oppure prenotare comunque, facendo attenzione al boiler.
            </p>
            <div class="dialog-buttons">
              <button id="showerChangeSlotBtn" type="button">Scegli un altro orario</button>
              <button id="showerConfirmSlotBtn" type="button" class="primary-btn">
                Prenota comunque
              </button>
            </div>
          </div>

          <p class="note tiny" style="margin-top: 8px; text-align: center;">
            üòÖ <strong>Ricorda:</strong> controlla sempre il boiler prima di entrare in doccia,
            per assicurarti che l'acqua sia davvero calda!
          </p>
        </div>

        <!-- üîµ SOTTO-SCHERMATA: PULIZIE -->
        <div id="cleaningScreen" class="subscreen">
          <div class="subheader">
            <button class="back-btn" data-back="home">‚Üê Indietro</button>
            <h2>Pulizie settimanali</h2>
          </div>

          <section class="card">
            <p class="note">
              Clicca sulla zona che vuoi pulire questa settimana. Ogni zona mostra chi se la √® presa in carico.
              Le assegnazioni si azzerano automaticamente quando inizia una nuova settimana (e finiscono nello storico).
            </p>

            <div class="cleaning-zones">
              <button class="cleaning-zone-row" data-zone="bagno_piccolo">
                <div class="cleaning-zone-label">Bagno piccolo</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-bagno_piccolo"></div>
              </button>
              <button class="cleaning-zone-row" data-zone="bagno_grande">
                <div class="cleaning-zone-label">Bagno grande</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-bagno_grande"></div>
              </button>
              <button class="cleaning-zone-row" data-zone="sala">
                <div class="cleaning-zone-label">Sala</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-sala"></div>
              </button>
              <button class="cleaning-zone-row" data-zone="cucina">
                <div class="cleaning-zone-label">Cucina</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-cucina"></div>
              </button>
            </div>
          </section>

          <section class="card">
            <h3>Storico pulizie</h3>
            <p class="note tiny">
              Ultimi che hanno pulito ogni zona (il pi√π recente appare per primo).
            </p>

            <div class="cleaning-history">
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Bagno piccolo</div>
                <div class="history-avatars" id="history-bagno_piccolo"></div>
              </div>
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Bagno grande</div>
                <div class="history-avatars" id="history-bagno_grande"></div>
              </div>
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Sala</div>
                <div class="history-avatars" id="history-sala"></div>
              </div>
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Cucina</div>
                <div class="history-avatars" id="history-cucina"></div>
              </div>
            </div>
          </section>
        </div>

        <!-- üîµ SOTTO-SCHERMATA: LISTA SPESA -->
        <div id="shoppingScreen" class="subscreen">
          <div class="subheader">
            <button class="back-btn" data-back="home">‚Üê Indietro</button>
            <h2>Lista della spesa</h2>
          </div>

          <section class="card">
            <h2>Checklist condivisa</h2>
            <ul id="shoppingList" class="shopping-list"></ul>

            <form id="shoppingAddForm" class="inline-form">
              <input id="shoppingAddInput" type="text" placeholder="Aggiungi elemento..." />
              <button type="submit" class="primary-btn">+</button>
            </form>

            <p class="note tiny">
              Spunta ci√≤ che manca. Puoi aggiungere nuovi elementi con il pulsante "+".
            </p>
          </section>
        </div>

        <!-- üîµ SOTTO-SCHERMATA: PROFILO UTENTE -->
        <div id="profileScreen" class="subscreen">
          <div class="subheader">
            <button class="back-btn" data-back="home">‚Üê Indietro</button>
            <h2>Profilo utente</h2>
          </div>

          <section class="card">
            <div class="avatar-large-wrapper">
              <div id="profileAvatarPreview" class="avatar-large">
                <span>üôÇ</span>
              </div>
            </div>

            <div class="field-row">
              <label for="profileFirstName">Nome</label>
              <input id="profileFirstName" type="text" />
            </div>
            <div class="field-row">
              <label for="profileLastName">Cognome</label>
              <input id="profileLastName" type="text" />
            </div>

            <div class="field-row">
              <label>Foto profilo</label>
              <div class="photo-buttons">
                <button id="profileOpenCameraBtn" type="button">üì∑ Scatta nuova foto</button>
                <label class="file-label">
                  üìÅ Da galleria
                  <input id="profilePhotoFileInput" type="file" accept="image/*" />
                </label>
              </div>
            </div>

            <!-- Pannello fotocamera profilo -->
            <div id="profileCameraPanel" class="camera-panel hidden">
              <video id="profileCameraVideo" autoplay playsinline></video>
              <div class="camera-buttons">
                <button id="profileTakePhotoBtn" type="button">üì∏ Scatta</button>
                <button id="profileCloseCameraBtn" type="button">Chiudi</button>
              </div>
            </div>

            <button id="profileSaveBtn" type="button" class="primary-btn">
              Salva modifiche
            </button>

            <p class="note tiny">
              Le modifiche valgono solo su questo dispositivo. Le prenotazioni future useranno il nuovo nome e la nuova foto.
            </p>
          </section>
        </div>
      </main>

      <footer>
        <p>Tip: usa ‚ÄúAggiungi alla schermata Home‚Äù per trasformarla in app üòä</p>
      </footer>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
