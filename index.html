<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Corso Montevecchio 66</title>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />

  <!-- Material Symbols Rounded -->
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,1,0"
  />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">

    <!-- SPLASH -->
    <div id="splashScreen" class="screen splash-screen">
      <div class="splash-content glass">
        <div class="splash-logo-wrap">
          <img src="assets/logo-casa.png" alt="Logo casa" class="splash-logo-img" />
        </div>
        <h1>Corso Montevecchio 66</h1>
        <p class="splash-tagline">La tua casa condivisa, semplificata</p>
      </div>
    </div>

    <!-- LOGIN -->
    <div id="loginScreen" class="screen screen-login">
      <div class="login-card card-elevated anim-enter">
        <h1>Benvenuto üëã</h1>
        <p class="subtitle">Registrati per la casa <strong>Corso Montevecchio 66</strong></p>

        <div class="avatar-large-wrapper">
          <div id="loginAvatarPreview" class="avatar-large avatar-ring">
            <span>üôÇ</span>
          </div>
        </div>

        <div class="field-row">
          <label for="loginFirstName">Nome</label>
          <input id="loginFirstName" type="text" placeholder="Es. Mario" />
        </div>
        <div class="field-row">
          <label for="loginLastName">Cognome</label>
          <input id="loginLastName" type="text" placeholder="Es. Rossi" />
        </div>

        <div class="field-row">
          <label>Foto profilo</label>
          <div class="photo-buttons">
            <button id="openCameraBtn" type="button" class="btn-secondary tap-animate">
              <span class="material-symbols-rounded"> photo_camera </span>
              Scatta foto
            </button>
            <label class="file-label btn-secondary tap-animate">
              <span class="material-symbols-rounded"> image </span>
              Da galleria
              <input id="photoFileInput" type="file" accept="image/*" />
            </label>
          </div>
          <p class="note">Se possibile usa la fotocamera. In alternativa carica una foto.</p>
        </div>

        <!-- Pannello fotocamera -->
        <div id="cameraPanel" class="camera-panel glass hidden">
          <video id="cameraVideo" autoplay playsinline></video>
          <div class="camera-buttons">
            <button id="takePhotoBtn" type="button" class="primary-btn tap-animate">üì∏ Scatta</button>
            <button id="closeCameraBtn" type="button" class="btn-secondary tap-animate">Chiudi</button>
          </div>
        </div>

        <button id="registerBtn" class="primary-btn primary-btn-full tap-animate" type="button">Entra in casa</button>
        <p class="note tiny">Dati salvati solo su questo dispositivo (nessun server, nessun costo).</p>
      </div>
    </div>

    <!-- MAIN -->
    <div id="mainScreen" class="screen screen-main">
      <header class="topbar glass clearer">
        <div>
          <h1 id="groupName">Corso Montevecchio 66</h1>
          <p class="subtitle">Gestione faccende di casa</p>
        </div>
        <div class="current-user tap-animate">
          <span id="currentUserAvatar" class="avatar avatar-ring"></span>
          <span id="currentUserName" class="user-name"></span>
        </div>
      </header>

      <main>
        <!-- HOME -->
        <div id="homeSections" class="home-sections view view-active" style="display:flex;">
          <button class="section-tile card-elevated tap-animate" data-section="laundry">
            <div class="section-icon pastel-sky">
              <span class="material-symbols-rounded"> local_laundry_service </span>
            </div>
            <div class="section-text">
              <h2>Lavatrice</h2>
              <p>Prenota lavatrice e stendini</p>
            </div>
            <span class="section-chevron material-symbols-rounded"> chevron_right </span>
          </button>

          <button class="section-tile card-elevated tap-animate" data-section="shower">
            <div class="section-icon pastel-mint">
              <span class="material-symbols-rounded"> shower </span>
            </div>
            <div class="section-text">
              <h2>Doccia</h2>
              <p>Prenota lo slot orario che preferisci</p>
            </div>
            <span class="section-chevron material-symbols-rounded"> chevron_right </span>
          </button>

          <button class="section-tile card-elevated tap-animate" data-section="cleaning">
            <div class="section-icon pastel-lilac">
              <span class="material-symbols-rounded"> mop </span>
            </div>
            <div class="section-text">
              <h2>Pulizie</h2>
              <p>Zone di casa settimanali</p>
            </div>
            <span class="section-chevron material-symbols-rounded"> chevron_right </span>
          </button>

          <button class="section-tile card-elevated tap-animate" data-section="shopping">
            <div class="section-icon pastel-peach">
              <span class="material-symbols-rounded"> shopping_cart </span>
            </div>
            <div class="section-text">
              <h2>Lista della spesa</h2>
              <p>Checklist condivisa</p>
            </div>
            <span class="section-chevron material-symbols-rounded"> chevron_right </span>
          </button>

          <!-- LAVAGNA -->
          <section class="card blackboard-card card-elevated anim-enter">
            <h3 style="margin-top:0;margin-bottom:6px;font-size:0.9rem;">Lavagna di casa</h3>
            <div id="homeBlackboard" class="blackboard tap-animate">
              <div id="homeBlackboardText" class="blackboard-text blackboard-placeholder">
                Tocca per scrivere un pensiero di casa
              </div>
              <div id="homeBlackboardAuthor" class="blackboard-author"></div>
            </div>
          </section>

          <!-- Dialogo lavagna -->
          <div id="blackboardDialog" class="dialog glass hidden">
            <p>Scrivi un pensiero da mostrare sulla lavagna:</p>
            <textarea id="blackboardInput" rows="3"
              style="width: 100%; border-radius: 12px; border: 1px solid #d0d0e5; padding: 8px;"></textarea>
            <div class="dialog-buttons">
              <button id="blackboardCancelBtn" type="button" class="btn-secondary tap-animate">Annulla</button>
              <button id="blackboardSaveBtn" type="button" class="primary-btn tap-animate">Scrivi</button>
            </div>
          </div>
        </div>

        <!-- LAVATRICE -->
        <div id="laundryScreen" class="subscreen view" style="display:none;">
          <div class="subheader subbar glass clearer">
            <button class="back-btn btn-secondary tap-animate" data-back="home">
              <span class="material-symbols-rounded"> arrow_back_ios_new </span>
              Indietro
            </button>
            <h2>Lavatrice & stendini</h2>
          </div>

          <section class="card card-elevated anim-enter">
            <p class="note">
              Puoi prenotare fino a <strong>2 lavatrici</strong> alla volta (2 stendini disponibili).
              Ogni stendino rimane occupato per <strong>48 ore</strong> dalla data/ora di inizio lavatrice.
            </p>

            <div class="field-row">
              <label>Data e ora della lavatrice</label>
              <button id="laundryDateBtn" class="dtp-trigger tap-animate" type="button">
                <span class="material-symbols-rounded"> calendar_month </span>
                <span id="laundryDateTimeDisplay">Seleziona data e ora</span>
              </button>
              <input id="laundryDateTimeValue" type="hidden" />
            </div>

            <button id="laundryBookBtn" type="button" class="primary-btn primary-btn-full tap-animate">
              Prenota lavatrice
            </button>

            <p id="laundryStatusMessage" class="note"></p>
          </section>

          <section class="card card-elevated anim-enter">
            <h3>Prenotazioni attive</h3>
            <ul id="laundryList" class="booking-list"></ul>
            <p class="note tiny">Le prenotazioni scadono automaticamente dopo 48 ore dall'inizio.</p>
          </section>
        </div>

        <!-- DOCCIA -->
        <div id="showerScreen" class="subscreen view" style="display:none;">
          <div class="subheader subbar glass clearer">
            <button class="back-btn btn-secondary tap-animate" data-back="home">
              <span class="material-symbols-rounded"> arrow_back_ios_new </span>
              Indietro
            </button>
            <h2>Doccia & boiler</h2>
          </div>

          <section class="card card-elevated anim-enter">
            <p class="note">Ogni doccia occupa uno slot di <strong>90 minuti</strong>.</p>

            <div class="field-row">
              <label>Data e ora della doccia</label>
              <button id="showerDateBtn" class="dtp-trigger tap-animate" type="button">
                <span class="material-symbols-rounded"> calendar_month </span>
                <span id="showerDateTimeDisplay">Seleziona data e ora</span>
              </button>
              <input id="showerDateTimeValue" type="hidden" />
            </div>

            <button id="showerBookBtn" type="button" class="primary-btn primary-btn-full tap-animate">
              Prenota doccia
            </button>
          </section>

          <section class="card card-elevated anim-enter">
            <h3>Prossime 5 docce</h3>
            <div id="showerSlots" class="slot-list"></div>
            <p class="note tiny">Gli slot scaduti vengono rimossi automaticamente.</p>
          </section>

          <div id="showerConflictDialog" class="dialog glass hidden">
            <p>
              ‚ö†Ô∏è <strong>Attenzione:</strong> lo slot che hai scelto si sovrappone a una doccia gi√† prenotata.
              Puoi scegliere un altro orario oppure prenotare comunque, facendo attenzione al boiler.
            </p>
            <div class="dialog-buttons">
              <button id="showerChangeSlotBtn" type="button" class="btn-secondary tap-animate">
                Scegli un altro orario
              </button>
              <button id="showerConfirmSlotBtn" type="button" class="primary-btn tap-animate">
                Prenota comunque
              </button>
            </div>
          </div>

          <p class="note tiny" style="margin-top: 8px; text-align: center;">
            üòÖ <strong>Ricorda:</strong> controlla sempre il boiler prima di entrare in doccia!
          </p>
        </div>

        <!-- PULIZIE -->
        <div id="cleaningScreen" class="subscreen view" style="display:none;">
          <div class="subheader subbar glass clearer">
            <button class="back-btn btn-secondary tap-animate" data-back="home">
              <span class="material-symbols-rounded"> arrow_back_ios_new </span>
              Indietro
            </button>
            <h2>Pulizie settimanali</h2>
          </div>

          <section class="card card-elevated anim-enter">
            <p class="note">
              Clicca sulla zona che vuoi pulire questa settimana. Ogni zona mostra chi se la √® presa in carico.
            </p>

            <div class="cleaning-zones">
              <button class="cleaning-zone-row tap-animate" data-zone="bagno_piccolo">
                <div class="cleaning-zone-label">Bagno piccolo</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-bagno_piccolo"></div>
              </button>
              <button class="cleaning-zone-row tap-animate" data-zone="bagno_grande">
                <div class="cleaning-zone-label">Bagno grande</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-bagno_grande"></div>
              </button>
              <button class="cleaning-zone-row tap-animate" data-zone="sala">
                <div class="cleaning-zone-label">Sala</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-sala"></div>
              </button>
              <button class="cleaning-zone-row tap-animate" data-zone="cucina">
                <div class="cleaning-zone-label">Cucina</div>
                <div class="cleaning-zone-assignee" id="cleaning-assignee-cucina"></div>
              </button>
            </div>
          </section>

          <section class="card card-elevated anim-enter">
            <h3>Storico pulizie</h3>
            <p class="note tiny">Ultimi che hanno pulito (il pi√π recente per primo).</p>

            <div class="cleaning-history">
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Bagno piccolo</div>
                <div class="history-avatars" id="history-bagno_piccolo"></div>
              </div>
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Bagno grande</div>
                <div class="history-avatars" id="history-bagno_grande"></div>
              </div>
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Sala</div>
                <div class="history-avatars" id="history-sala"></div>
              </div>
              <div class="cleaning-history-row">
                <div class="cleaning-history-title">Cucina</div>
                <div class="history-avatars" id="history-cucina"></div>
              </div>
            </div>
          </section>
        </div>

        <!-- LISTA SPESA -->
        <div id="shoppingScreen" class="subscreen view" style="display:none;">
          <div class="subheader subbar glass clearer">
            <button class="back-btn btn-secondary tap-animate" data-back="home">
              <span class="material-symbols-rounded"> arrow_back_ios_new </span>
              Indietro
            </button>
            <h2>Lista della spesa</h2>
          </div>

          <section class="card card-elevated anim-enter">
            <h2>Checklist condivisa</h2>
            <ul id="shoppingList" class="shopping-list"></ul>

            <form id="shoppingAddForm" class="inline-form">
              <input id="shoppingAddInput" type="text" placeholder="Aggiungi elemento..." />
              <button type="submit" class="primary-btn tap-animate">+</button>
            </form>

            <p class="note tiny">Spunta ci√≤ che manca. Puoi aggiungere nuovi elementi con il ‚Äú+‚Äù.</p>
          </section>
        </div>

        <!-- PROFILO -->
        <div id="profileScreen" class="subscreen view" style="display:none;">
          <div class="subheader subbar glass clearer">
            <button class="back-btn btn-secondary tap-animate" data-back="home">
              <span class="material-symbols-rounded"> arrow_back_ios_new </span>
              Indietro
            </button>
            <h2>Profilo utente</h2>
          </div>

          <section class="card card-elevated anim-enter">
            <div class="avatar-large-wrapper">
              <div id="profileAvatarPreview" class="avatar-large avatar-ring">
                <span>üôÇ</span>
              </div>
            </div>

            <div class="field-row">
              <label for="profileFirstName">Nome</label>
              <input id="profileFirstName" type="text" />
            </div>
            <div class="field-row">
              <label for="profileLastName">Cognome</label>
              <input id="profileLastName" type="text" />
            </div>

            <div class="field-row">
              <label>Foto profilo</label>
              <div class="photo-buttons">
                <button id="profileOpenCameraBtn" type="button" class="btn-secondary tap-animate">
                  <span class="material-symbols-rounded"> photo_camera </span>
                  Scatta nuova foto
                </button>
                <label class="file-label btn-secondary tap-animate">
                  <span class="material-symbols-rounded"> image </span>
                  Da galleria
                  <input id="profilePhotoFileInput" type="file" accept="image/*" />
                </label>
              </div>
            </div>

            <div id="profileCameraPanel" class="camera-panel glass hidden">
              <video id="profileCameraVideo" autoplay playsinline></video>
              <div class="camera-buttons">
                <button id="profileTakePhotoBtn" type="button" class="primary-btn tap-animate">üì∏ Scatta</button>
                <button id="profileCloseCameraBtn" type="button" class="btn-secondary tap-animate">Chiudi</button>
              </div>
            </div>

            <button id="profileSaveBtn" type="button" class="primary-btn primary-btn-full tap-animate">
              Salva modifiche
            </button>
            <p class="note tiny">Le modifiche valgono solo su questo dispositivo.</p>
          </section>
        </div>
      </main>

      <footer>
        <p>Tip: usa ‚ÄúAggiungi alla schermata Home‚Äù per trasformarla in app üòä</p>
      </footer>
    </div>
  </div>

  <!-- DateTime Picker overlay (riutilizzato da Lavatrice e Doccia) -->
  <div id="dtpOverlay" class="dtp-overlay hidden">
    <div class="dtp-modal card-elevated">
      <div class="dtp-header">
        <button id="dtpPrevMonth" class="btn-secondary icon-btn" type="button">
          <span class="material-symbols-rounded"> chevron_left </span>
        </button>
        <div id="dtpMonthLabel" class="dtp-month-label">Marzo 2025</div>
        <button id="dtpNextMonth" class="btn-secondary icon-btn" type="button">
          <span class="material-symbols-rounded"> chevron_right </span>
        </button>
      </div>

      <div class="dtp-body">
        <div class="dtp-calendar">
          <div class="dtp-weekdays">
            <span>Lu</span><span>Ma</span><span>Me</span><span>Gi</span><span>Ve</span><span>Sa</span><span>Do</span>
          </div>
          <div id="dtpDays" class="dtp-days"></div>
        </div>
        <div class="dtp-times">
          <div class="dtp-times-title">Orario</div>
          <div id="dtpTimeList" class="dtp-time-list"></div>
        </div>
      </div>

      <div class="dtp-footer">
        <button id="dtpCancel" class="btn-secondary tap-animate" type="button">Annulla</button>
        <button id="dtpConfirm" class="primary-btn tap-animate" type="button">Conferma</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
